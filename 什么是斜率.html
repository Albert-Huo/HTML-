<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–œç‡æ¸¸ä¹åœºï¼šå°å­¦ç”Ÿäº’åŠ¨æ¨¡æ‹Ÿ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&display=swap');
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #f0f9ff;
            user-select: none; /* é˜²æ­¢æ‹–åŠ¨æ—¶é€‰ä¸­æ–‡æœ¬ */
        }
        .canvas-container {
            background-image: linear-gradient(#e5e7eb 1px, transparent 1px),
                              linear-gradient(90deg, #e5e7eb 1px, transparent 1px);
            background-size: 40px 40px;
            background-position: -1px -1px;
        }
        input[type=range] {
            -webkit-appearance: none; 
            background: transparent; 
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 24px;
            width: 24px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
            margin-top: -10px; 
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            cursor: pointer;
            background: #cbd5e1;
            border-radius: 2px;
        }
    </style>
</head>
<body class="flex flex-col items-center min-h-screen p-4">

    <!-- æ ‡é¢˜åŒº -->
    <header class="text-center mb-6">
        <h1 class="text-3xl md:text-4xl font-bold text-blue-600 mb-2">ğŸ”ï¸ æ–œç‡æ¸¸ä¹åœº</h1>
        <p class="text-gray-600">æ‹–åŠ¨æ»‘å—ï¼Œçœ‹çœ‹å¡åº¦æ€ä¹ˆå˜ï¼</p>
    </header>

    <!-- ä¸»äº¤äº’åŒº -->
    <div class="bg-white rounded-3xl shadow-xl p-6 w-full max-w-2xl border-4 border-blue-100">
        
        <!-- ç”»å¸ƒæ˜¾ç¤ºåŒº -->
        <div class="relative w-full h-64 md:h-80 bg-white border-2 border-gray-200 rounded-xl overflow-hidden canvas-container mb-6 flex justify-center items-center">
            <canvas id="slopeCanvas"></canvas>
            
            <!-- è¦†ç›–åœ¨ç”»å¸ƒä¸Šçš„æ ‡ç­¾ -->
            <div id="riseLabel" class="absolute text-red-500 font-bold text-lg bg-white bg-opacity-80 px-1 rounded transition-all duration-200">å‡é«˜: 0</div>
            <div id="runLabel" class="absolute text-green-600 font-bold text-lg bg-white bg-opacity-80 px-1 rounded transition-all duration-200">å‰è¿›: 0</div>
        </div>

        <!-- ç»“æœå±•ç¤ºåŒº -->
        <div class="bg-blue-50 rounded-xl p-4 mb-6 text-center">
            <div class="text-lg text-gray-700 mb-1">é­”æ³•å…¬å¼ï¼šæ–œç‡ = <span class="text-red-500 font-bold">å‡é«˜</span> Ã· <span class="text-green-600 font-bold">å‰è¿›</span></div>
            <div class="flex justify-center items-baseline space-x-2">
                <span class="text-3xl font-bold text-gray-800">Slope = </span>
                <span id="mathDisplay" class="text-3xl font-bold text-blue-600">0 Ã· 5 = 0</span>
            </div>
            <div id="commentDisplay" class="mt-2 text-xl font-bold text-orange-500">å¹³å¹³çš„è·¯ï¼ŒçœŸå¥½èµ°ï¼</div>
        </div>

        <!-- æ§åˆ¶æ»‘å—åŒº -->
        <div class="space-y-6">
            <!-- å‡é«˜æ»‘å— -->
            <div>
                <div class="flex justify-between items-center mb-1">
                    <label class="font-bold text-red-500 flex items-center">
                        â†•ï¸ å‡é«˜ (Rise)
                    </label>
                    <span id="riseValue" class="bg-red-100 text-red-600 px-2 py-1 rounded-lg font-mono font-bold">0</span>
                </div>
                <input type="range" id="riseSlider" min="-10" max="10" value="0" step="1" class="w-full">
                <div class="flex justify-between text-xs text-gray-400 mt-1">
                    <span>ä¸‹å¡ (-10)</span>
                    <span>å¹³ (0)</span>
                    <span>ä¸Šå¡ (10)</span>
                </div>
            </div>

            <!-- å‰è¿›æ»‘å— -->
            <div>
                <div class="flex justify-between items-center mb-1">
                    <label class="font-bold text-green-600 flex items-center">
                        â¡ï¸ å‰è¿› (Run)
                    </label>
                    <span id="runValue" class="bg-green-100 text-green-700 px-2 py-1 rounded-lg font-mono font-bold">5</span>
                </div>
                <input type="range" id="runSlider" min="1" max="10" value="5" step="1" class="w-full">
                <div class="flex justify-between text-xs text-gray-400 mt-1">
                    <span>1</span>
                    <span>10</span>
                </div>
            </div>
        </div>
    </div>

    <!-- åº•éƒ¨è¯´æ˜ -->
    <div class="mt-6 text-center text-sm text-gray-500 max-w-md">
        <p>ğŸ’¡ è¯•ä¸€è¯•ï¼šæŠŠâ€œå‰è¿›â€å˜å°ï¼Œçœ‹çœ‹å¡åº¦ä¼šä¸ä¼šçªç„¶å˜å¾—å¾ˆé™¡ï¼Ÿ</p>
    </div>

    <script>
        // è·å–å…ƒç´ 
        const canvas = document.getElementById('slopeCanvas');
        const ctx = canvas.getContext('2d');
        const riseSlider = document.getElementById('riseSlider');
        const runSlider = document.getElementById('runSlider');
        const riseValue = document.getElementById('riseValue');
        const runValue = document.getElementById('runValue');
        const mathDisplay = document.getElementById('mathDisplay');
        const commentDisplay = document.getElementById('commentDisplay');
        const riseLabel = document.getElementById('riseLabel');
        const runLabel = document.getElementById('runLabel');

        // æ ¼å­å¤§å°
        const GRID_SIZE = 40;
        let width, height, centerX, centerY;

        // åˆå§‹åŒ–ç”»å¸ƒå¤§å°
        function resizeCanvas() {
            const container = canvas.parentElement;
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
            width = canvas.width;
            height = canvas.height;
            // è®¾ç½®åŸç‚¹åœ¨å·¦ä¾§åä¸‹ï¼Œä¸ºäº†æ˜¾ç¤ºè´Ÿæ•°ï¼Œç¨å¾®å¾€ä¸Šæä¸€ç‚¹
            centerX = 60; 
            centerY = height / 2 + 60; // ç¨å¾®åä¸‹ä¸€ç‚¹ä½œä¸º0ç‚¹
            draw();
        }

        window.addEventListener('resize', resizeCanvas);

        // ç»˜åˆ¶ä¸»å‡½æ•°
        function draw() {
            // æ¸…ç©ºç”»å¸ƒ
            ctx.clearRect(0, 0, width, height);

            // è·å–å½“å‰å€¼
            const rise = parseInt(riseSlider.value);
            const run = parseInt(runSlider.value);

            // æ›´æ–°æ–‡æœ¬æ˜¾ç¤º
            riseValue.textContent = rise;
            runValue.textContent = run;

            // è®¡ç®—æ–œç‡ (ä¿ç•™2ä½å°æ•°)
            const slope = run === 0 ? "æ— é™å¤§" : (rise / run);
            const slopeText = typeof slope === 'number' ? parseFloat(slope.toFixed(2)) : slope;
            
            mathDisplay.textContent = `${rise} Ã· ${run} = ${slopeText}`;
            updateComment(slope);

            // åæ ‡è®¡ç®—
            const startX = centerX;
            const startY = centerY;
            const endX = startX + run * GRID_SIZE;
            const endY = startY - rise * GRID_SIZE; // Canvas Yè½´å‘ä¸‹æ˜¯æ­£ï¼Œæ‰€ä»¥å‡å»rise

            // 1. ç»˜åˆ¶åæ ‡è½´ (ç®€å•çš„)
            ctx.beginPath();
            ctx.strokeStyle = '#94a3b8';
            ctx.lineWidth = 2;
            // Xè½´
            ctx.moveTo(20, startY);
            ctx.lineTo(width - 20, startY);
            // Yè½´ (åœ¨èµ·ç‚¹å¤„)
            ctx.moveTo(startX, 20);
            ctx.lineTo(startX, height - 20);
            ctx.stroke();

            // 2. ç»˜åˆ¶ä¸‰è§’å½¢ "å‡é«˜" å’Œ "å‰è¿›" è¾…åŠ©çº¿
            // åªæœ‰å½“ä¸æ˜¯æ˜¯ä¸€ä¸ªç‚¹çš„æ—¶å€™æ‰ç”»
            if (run !== 0 || rise !== 0) {
                // ç»˜åˆ¶ "å‰è¿›" çº¿ (ç»¿è‰²)
                ctx.beginPath();
                ctx.strokeStyle = '#16a34a'; // green-600
                ctx.lineWidth = 4;
                ctx.setLineDash([5, 5]); // è™šçº¿
                ctx.moveTo(startX, startY);
                ctx.lineTo(endX, startY);
                ctx.stroke();
                
                // ç»˜åˆ¶ "å‡é«˜" çº¿ (çº¢è‰²)
                ctx.beginPath();
                ctx.strokeStyle = '#ef4444'; // red-500
                ctx.setLineDash([5, 5]); // è™šçº¿
                ctx.moveTo(endX, startY);
                ctx.lineTo(endX, endY);
                ctx.stroke();
                ctx.setLineDash([]); // æ¢å¤å®çº¿
            }

            // 3. ç»˜åˆ¶æ–œå¡ä¸»çº¿ (è“è‰²ç²—çº¿)
            ctx.beginPath();
            ctx.strokeStyle = '#2563eb'; // blue-600
            ctx.lineWidth = 6;
            ctx.lineCap = 'round';
            ctx.moveTo(startX, startY);
            ctx.lineTo(endX, endY);
            ctx.stroke();

            // 4. ç”»èµ·ç‚¹å’Œç»ˆç‚¹åœ†ç‚¹
            drawDot(startX, startY, '#64748b'); // èµ·ç‚¹
            drawDot(endX, endY, '#2563eb');     // ç»ˆç‚¹

            // 5. ç”»ä¸€ä¸ªå°äººæˆ–è€…æ˜¯çƒåœ¨å¡ä¸Š
            drawCharacter(endX, endY, rise);

            // 6. æ›´æ–°æ ‡ç­¾ä½ç½®
            // å‰è¿›æ ‡ç­¾ä½ç½®ï¼šXè½´ä¸­ç‚¹ä¸‹æ–¹
            runLabel.style.left = `${startX + (run * GRID_SIZE)/2 - 20}px`;
            runLabel.style.top = `${startY + 10}px`;
            
            // å‡é«˜æ ‡ç­¾ä½ç½®ï¼šå‚ç›´çº¿ä¸­ç‚¹å³ä¾§
            riseLabel.style.left = `${endX + 10}px`;
            riseLabel.style.top = `${startY - (rise * GRID_SIZE)/2 - 15}px`;
        }

        function drawDot(x, y, color) {
            ctx.beginPath();
            ctx.fillStyle = color;
            ctx.arc(x, y, 6, 0, Math.PI * 2);
            ctx.fill();
        }

        function drawCharacter(x, y, rise) {
            // ç”»ä¸€ä¸ªç®€å•çš„å°è¡¨æƒ…åœ¨ç»ˆç‚¹
            ctx.font = '24px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            
            let emoji = 'ğŸ˜'; // é»˜è®¤
            if (rise > 5) emoji = 'ğŸ¥µ'; // å¤ªé™¡äº†ç´¯
            else if (rise > 2) emoji = 'ğŸ™‚'; // çˆ¬å±±
            else if (rise > 0) emoji = 'ğŸš¶'; // æ•£æ­¥
            else if (rise === 0) emoji = 'ğŸƒ'; // è·‘æ­¥
            else if (rise > -3) emoji = 'ğŸ‚'; // æ»‘é›ªç¼“å¡
            else emoji = 'ğŸ¢'; // åˆºæ¿€ä¸‹å¡

            // åœ¨ç»ˆç‚¹ç¨å¾®ä¸Šæ–¹ä¸€ç‚¹ç”»è¡¨æƒ…
            ctx.fillText(emoji, x, y - 20);
        }

        function updateComment(slope) {
            let text = "";
            let color = "text-gray-600";

            if (slope === 0) {
                text = "å¹³å¹³çš„åœ°é¢ï¼Œå®Œå…¨ä¸ç´¯ï¼(æ–œç‡ = 0)";
                color = "text-blue-500";
            } else if (slope > 0 && slope < 0.5) {
                text = "å°ç¼“å¡ï¼Œæ•£æ­¥å¾ˆèˆ’æœã€‚";
                color = "text-green-500";
            } else if (slope >= 0.5 && slope < 1.5) {
                text = "è¿™åƒæ˜¯ä¸€åº§å°å±±ï¼Œè¦å‡ºæ±—äº†ï¼";
                color = "text-yellow-600";
            } else if (slope >= 1.5) {
                text = "å¤ªé™¡äº†ï¼ç®€ç›´æ˜¯åœ¨æ”€å²©ï¼ğŸ˜±";
                color = "text-red-600";
            } else if (slope < 0 && slope > -0.5) {
                text = "å¾®å¾®çš„ä¸‹å¡ï¼Œå°å¿ƒè„šä¸‹ã€‚";
                color = "text-green-500";
            } else if (slope <= -0.5) {
                text = "å“‡ï¼è¿™æ˜¯æ»‘æ»‘æ¢¯æˆ–è€…æ˜¯è¿‡å±±è½¦ï¼ğŸ¢";
                color = "text-purple-600";
            }

            commentDisplay.textContent = text;
            commentDisplay.className = `mt-2 text-xl font-bold ${color}`;
        }

        // äº‹ä»¶ç›‘å¬
        riseSlider.addEventListener('input', draw);
        runSlider.addEventListener('input', draw);

        // åˆå§‹åŒ–
        resizeCanvas();

    </script>
</body>
</html>